// const { viewRoles, viewEmployees, viewDepartments } = require('./view');
// const { addRole, addEmployee, addDepartment } = require('./add');
// const connection = require('../config/connection');
// const db = connection;


function updateEmployee() {
    let employeeArray = [];
    connection.query('SELECT * FROM employees', function (err, res) {
        if (err) throw err
        for (var i = 0; i < res.length; i++) {
            employeeArray.push(res[i].last_name);
        }
        inquirer.prompt([
            {
                name: 'employee',
                type: 'list',
                message: 'Which employee do you want to update?',
                choices: employeeArray
            },
            {
                name: 'newRole',
                type: 'input',
                message: 'What is the new role ID for this employee?',
                choices: chooseRole()
            }
        ]).then((answers) => {
            let employeeId = employeeArray.indexOf(answers.employee) + 1
            connection.query('UPDATE employees SET ? WHERE ?',
                [
                    {
                        role_id: answers.newRole
                    },
                    {
                        id: employeeId
                    }
                ],
                function (err) {
                    if (err) throw err
                    console.log('Employee updated');
                    startQuestions();
                }
            );
        });
    });
}

function updateRole() {
    let roleArray = [];
    connection.query('SELECT * FROM roles', function (err, res) {
        if (err) throw err
        for (var i = 0; i < res.length; i++) {
            roleArray.push(res[i].last_name);
        }
        inquirer.prompt([
            {
                name: 'employee',
                type: 'list',
                message: 'Which employee do you want to update?',
                choices: employeeArray
            },
            {
                name: 'newRole',
                type: 'input',
                message: 'What is the new role ID for this employee?',
                choices: chooseRole()
            }
        ]).then((answers) => {
            let roleId = roleArray.indexOf(answers.newRole) + 1
            connection.query('UPDATE employees SET ? WHERE ?',
                [
                    {
                        role_id: answers.newRole
                    },
                    {
                        id: employeeId
                    }
                ])
        }),
            function (err) {
                if (err) throw err
                console.log('Role updated');
                startQuestions();
            }


    })
}

